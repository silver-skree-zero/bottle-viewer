<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Three.js Scene</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }

    .color-flyout {
      position: relative;
    }

    summary {
      list-style: none; /* For most browsers */
      
      /* Apply button styles */
      display: inline-block;
      background-color: rgb(240, 240, 240); /* Example background color */
      color: #000000; /* Text color */
      padding-block: 1px;
      padding-inline: 6px;
      border: 1px solid rgba(0,0,0,0.5); /* Border style */
      border-radius: 2px; 
      text-align: center;
      font-family: sans-serif;
      font-size: 13.3333px;
      text-decoration: none; /* Remove default underline if any */
    }

    summary::-webkit-details-marker {
      display: none;
    }

    summary:hover {
      background-color: #0056b3;
    }

    /* Add a pressed effect when clicked */
    summary:active {
      position: relative;
      top: 1px;
    }

    /* Button appearance */
    .flyout-button {
      list-style: none; /* For most browsers */
      cursor: pointer; /* Change the cursor to a hand icon on hover */
    }

    /* Hover / active states */
    .flyout-button:hover {
      background: rgba(200, 200, 200, 1);
    }

    details[open] > .flyout-button {
      background: rgba(80, 80, 80, 0.9);
    }

    /* Keyboard focus */
    .flyout-button:focus-visible {
      outline: 2px solid #4da3ff;
      outline-offset: 2px;
    }

    .color-panel {
      position: absolute;
      top: 100%;
      left: 0;
      padding: 8px;
      background: rgba(30,30,30,0.95);
      border-radius: 6px;
      display: flex;
      gap: 8px;
      z-index: 1000;
    }

    .swatch {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid #aaa;
      cursor: pointer;
    }
  </style>
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.182.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.182.0/examples/jsm/"
    }
  }
  </script>
</head>
<body>
    <button id="recordButton" style="
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
    ">Record Rotation</button>
    <button id="resetCameraButton" style="
      position: absolute;
      top: 50px;
      left: 20px;
      z-index: 10;
    ">Reset Camera</button>
    <button id="loadLabelButton" style="
      position: absolute;
      top: 80px;
      left: 20px;
      z-index: 10;
    ">Add Label</button>
    <input type="color" id="colorPicker" value="#808080" style="
      position: absolute;
      top: 110px;
      left: 20px;
      z-index: 10;">

    <details class="color-flyout"style="
    position: absolute;
    top: 150px;
    left: 20px;
    z-index: 10;">
      <summary class="flyout-button">
        Cap Color
      </summary>

      <div class="color-panel">
        <button class="swatch" data-color="#9ffcff" style="background:#d9d9d9"></button>
        <button class="swatch" data-color="#ff6f6f" style="background:#000000"></button>
        <button class="swatch" data-color="#6fff9f" style="background:#4040A0"></button>
      </div>
    </details>

    <label for="fov-slider" style="
    position:absolute;
    top: 200px;
    left: 20px;
    z-index: 10;">FOV:</label>
    <input id="fov-slider" type="range" min="1" max="100" step="1" value="50" style="
    position:absolute;
    top: 220px;
    left: 20px;
    z-index: 10;">

    <label for="rot-slider" style="
    position:absolute;
    top: 240px;
    left: 20px;
    z-index: 10;">Rotation:</label>
    <input id="rot-slider" type="range" min="0" max="720" step="1" value="180" style="
    position:absolute;
    top: 260px;
    left: 20px;
    z-index: 10;">

    <details style="
    position: absolute;
    top: 300px;
    left: 20px;
    z-index: 10;">
      <summary>
        Bottle Size
      </summary>

      <div >
        <button id="buttonSmall" data-color="#9ffcff">S</button>
        <button id="buttonMed" data-color="#ff6f6f">M</button>
        <button id="buttonLarge" data-color="#6fff9f">L</button>
      </div>
    </details>

    <script type="module" src="./js/whammy.js"></script>
    <script type="module" src="./js/shader.js"></script>
    <script type="module" src="./js/index.js"></script>
</body>
</html>

